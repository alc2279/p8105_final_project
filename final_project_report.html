<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />


<meta name="author" content="Annie, Margaret, Jiyue &amp; Aakriti" />

<meta name="date" content="2018-12-06" />

<title>The Heart Project</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/journal.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.0.13/css/fa-svg-with-js.css" rel="stylesheet" />
<script src="site_libs/font-awesome-5.0.13/js/fontawesome-all.min.js"></script>
<script src="site_libs/font-awesome-5.0.13/js/fa-v4-shims.min.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>


</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 61px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 66px;
  margin-top: -66px;
}

.section h2 {
  padding-top: 66px;
  margin-top: -66px;
}
.section h3 {
  padding-top: 66px;
  margin-top: -66px;
}
.section h4 {
  padding-top: 66px;
  margin-top: -66px;
}
.section h5 {
  padding-top: 66px;
  margin-top: -66px;
}
.section h6 {
  padding-top: 66px;
  margin-top: -66px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>


<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>




<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}


.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
  padding-left: 25px;
  text-indent: 0;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>

<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Home</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="flexdashboard.html">Analysis</a>
</li>
<li>
  <a href="https://aakriti.shinyapps.io/ny_shiny/">NYC Map</a>
</li>
<li>
  <a href="https://jiyueqin.shinyapps.io/framingham/">Find Your Risk!</a>
</li>
<li>
  <a href="final_project_report.html">Project Report</a>
</li>
<li>
  <a href="https://heartbeathealth.com/">
    <span class="fa fa-heartbeat fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/alc2279/p8105_final_project">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="mailto:&lt;alc2279@cumc.columbia.edu&gt;">
    <span class="fa fa-envelope fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">

<div class="btn-group pull-right">
<button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">The Heart Project</h1>
<h4 class="author"><em>Annie, Margaret, Jiyue &amp; Aakriti</em></h4>
<h4 class="date"><em>December 6, 2018</em></h4>

</div>


<div id="motivation" class="section level1">
<h1>Motivation</h1>
<div id="some-facts-about-heart-disease" class="section level3">
<h3>Some facts about heart disease</h3>
<ul>
<li>Approximately 1.5 million heart attacks and strokes occur every year in the United States.</li>
<li>More than 800,000 people in the United States die from cardiovascular disease each year—that’s 1 in every 3 deaths, and about 160,000 of them occur in people under age 65.</li>
<li>Heart disease kills roughly the same number people in the United States each year as cancer, pneumonia, and accidents combined.</li>
<li>Heart disease and stroke cost the nation an estimated $555 billion in health care costs and lost productivity in 2015.</li>
</ul>
<div id="heres-more" class="section level4">
<h4><em>Here’s more:</em></h4>
<p>Majority of Americans are already suffering from heart disease. The prevalence of heart disease in the US is shown in the map below.</p>
<div class="figure">
<img src="pictures/chd_map.gif" alt="Prevalence of heart disease" />
<p class="caption">Prevalence of heart disease</p>
</div>
</div>
<div id="and" class="section level4">
<h4><em>And…</em></h4>
<p><em>About 90% of the risk for the first heart attack is because of conditions or lifestyle factors that are preventable.</em></p>
<div class="figure">
<img src="pictures/lifestyle.png" alt="Lifestyle risk factors" />
<p class="caption">Lifestyle risk factors</p>
</div>
<p>There is plenty of room for improvement when it comes to raising awareness for cardiovascular risk, based on a <a href="https://www.ahajournals.org/doi/pdf/10.1161/JAHA.117.005491">recent study</a> that found one in five adults at risk for heart disease don’t recognize a need to improve their health. We believe that a better understanding of risk factors underlying health perceptions and behaviors is needed to capitalize on cardiovascular preventive efforts.</p>
</div>
</div>
<div id="goals-of-our-project" class="section level3">
<h3>Goals of our project</h3>
<ul>
<li>Understanding risk factors for heart disease and stroke</li>
<li>Visualizing correlations of these risk factors with heart disease and stroke</li>
<li>Visualizing the distribution of risk factors and cardiovascular outcomes in New York City</li>
<li>Predicting risk of heart disease in an individual patient based on presence of risk factors</li>
</ul>
</div>
</div>
<div id="related-work" class="section level1">
<h1>Related Work</h1>
<p>We were inspired to work on this project given our collective interest in heart disease and role of data science for improved visualization for potential application by healthcare providers, patients and the community. One of our team members, Aakriti, is a cardiology fellow at Columbia, and also co-founder of a preventive cardiology startup called <a href="https://www.heartbeathealth.com">Heartbeat</a>. The mission of this company is to redesign the field of cardiology to be more inclusive and improve quality of life at any age. Their practice focuses on early diagnosis and management that empowers people to feel better, live healthier, understand their heart, and most importantly — have access to a trusted clinical team anywhere. They are a multidisciplinary team of doctors, educators, engineers, and researchers making prevention as simple as getting the heart checked. They are headquartered in Manhattan.</p>
<p>Drawing inspiration from this work, we created this website with the goal to develop interactive visualization of heart disease prevalence and risk factors that are easy to understand for lay people so that they begin to understand their individualized risk and can begin to take steps toward prevention.</p>
</div>
<div id="initial-questions" class="section level1">
<h1>Initial questions</h1>
<p>We sought to examine the risk factors for heart disease and their prevalence in New York City. We were also interested in examining novel ways of visualizing the correlation of indivisual risk factors with heart disease and stroke based on our knowledge gained in the Data Science class. In addition, we also wanted to find ways of predicting and visualizing an individual’s risk for heart disease. As such, our questions were as follows:</p>
<ul>
<li>What are the risk factors for heart disease and stroke? How can we visualize the correlation of individual risk factors with heart disease and stroke?</li>
<li>What is the distribution of these risk factors and outcomes in New York city?</li>
<li>How can we predict and visualize an individual’s risk for heart disease?</li>
</ul>
</div>
<div id="data" class="section level1">
<h1>Data</h1>
<p>In order to address the first two questions, we utilized the <a href="https://catalog.data.gov/dataset/500-cities-local-data-for-better-health-b32fd">500 Cities: Local Data for Better Health</a> dataset. The 500 Cities project is a collaboration between CDC, the Robert Wood Johnson Foundation, and the CDC Foundation. The purpose of the 500 Cities Project is to provide city- and census tract-level small area estimates for chronic disease risk factors, health outcomes, and clinical preventive service use for the largest 500 cities in the United States. These small area estimates will allow cities and local health departments to better understand the burden and geographic distribution of health-related variables in their jurisdictions, and assist them in planning public health interventions. Since we were interested in visualizing these data only for New York city, we filtered the dataset to include data only from New York city.</p>
<p>The data can also be downloaded on <a href="https://drive.google.com/drive/folders/1U_8orguSxdIiNpxj_6sx8rav6ubqmmrq">Google Drive</a></p>
<p>Risk factors that we’re interested in:: (15 total)</p>
<ul>
<li>ACCESS2: Current lack of health insurance among adults aged 18-64 Years</li>
<li>BINGE: Binge drinking among adults aged &gt;=18 Year</li>
<li>BPHIGH: High blood pressure among adults aged &gt;=18 Year</li>
<li>BPMED: Taking medicine for high blood pressure control among adults aged &gt;=18 Years with high blood pressure</li>
<li>OBESITY: Obesity among adults aged &gt;=18 Years</li>
<li>CHECKUP: Visits to doctor for routine checkup within the past Year among adults aged &gt;=18 Years</li>
<li>CHOLSCREEN: Cholesterol screening among adults aged &gt;=18 Years</li>
<li>CSMOKING: Current smoking among adults aged &gt;=18 Years</li>
<li>DIABETES: Diagnosed diabetes among adults aged &gt;=18 Years</li>
<li>HIGHCHOL: High cholesterol among adults aged &gt;=18 Years who have been screened in the past 5 Years</li>
<li>KIDNEY: Chronic kidney disease among adults aged &gt;=18 Years</li>
<li>LPA: No leisure-time physical activity among adults aged &gt;=18 Years</li>
<li>MHLTH: Mental health not good for &gt;=14 days among adults aged &gt;=18 Years</li>
<li>PHLTH: Physical health not good for &gt;=14 days among adults aged &gt;=18 Years</li>
<li>SLEEP: Sleeping less than 7 hours among adults aged &gt;=18 Years</li>
</ul>
<p>Outcomes that we’re interested in:: (2 total)</p>
<ul>
<li>CHD: Coronary heart disease among adults aged &gt;=18 Years</li>
<li>STROKE: Stroke among adults aged &gt;=18 Years</li>
</ul>
<p>In order to predict risk for heart disease for an individual, we utilized the <a href="https://en.wikipedia.org/wiki/Framingham_Risk_Score">Framigham Risk Score</a>. The Framingham Risk Score is a gender-specific algorithm used to estimate the 10-year cardiovascular risk of an individual. The Framingham Risk Score was first developed based on data obtained from the <a href="https://en.wikipedia.org/wiki/Framingham_Heart_Study">Framingham Heart Study</a>, to estimate the 10-year risk of developing coronary heart disease. We utilized the algorithm to develop visualization in ShinyApp as discussed below.</p>
</div>
<div id="exploratory-analysis" class="section level1">
<h1>Exploratory Analysis</h1>
<div id="loading-and-tidying-the-data" class="section level3">
<h3>Loading and tidying the data</h3>
<p>We scraped the data directly from the web as seen in the code below and called it <code>cvrisk</code>.</p>
<pre class="r"><code>cvrisk = read_csv(&quot;https://data.cdc.gov/api/views/6vp6-wxuq/rows.csv?accessType=DOWNLOAD&quot;) %&gt;% 
    janitor::clean_names() </code></pre>
<p>We then restricted our database to census tract -level data in New York City and included only the variables that were useful for further data visualization. We called this database <code>nyc_cvrisk</code>. We then exported this to a csv in our repository so that we can read in the limited dataset for future use to improve efficiency.</p>
<p>There were 591 missing values in the dataset, which corresponded to observations that had population counts less than 50. For this reason, we did include these datapoints in our analysis and removed them while tidying.</p>
<pre class="r"><code>nyc_cvrisk = 
  cvrisk %&gt;% 
  filter(state_desc == &quot;New York&quot;, city_name == &quot;New York&quot;,
         geographic_level == &quot;Census Tract&quot;,
         !is.na(data_value),
         measure_id %in% c(&quot;ACCESS2&quot;, &quot;BINGE&quot;, &quot;BPHIGH&quot;, &quot;BPMED&quot;, &quot;OBESITY&quot;, &quot;CHECKUP&quot;, 
                         &quot;CHOLSCREEN&quot;, &quot;CSMOKING&quot;, &quot;DIABETES&quot;, &quot;HIGHCHOL&quot;, &quot;KIDNEY&quot;, 
                         &quot;LPA&quot;, &quot;MHLTH&quot;, &quot;PHLTH&quot;, &quot;SLEEP&quot;, &quot;CHD&quot;, &quot;STROKE&quot;)) %&gt;%
  droplevels() %&gt;% 
  select(unique_id, population_count, measure_id, data_value, short_question_text)</code></pre>
<p>The following is a distribution of the prevalences of all of the relevant variables. As you can see the risk factors with highest prevalence involve screening and medication (BPMED, CHECKUP and CHOLSCREEN). The risk factors with the lowest prevlances are diseases (CHD, KIDNEY and STROKE). There is a general trend of higher variance among risk factors with higher prevalences.</p>
<pre class="r"><code>theme_set(theme_bw())
nyc_cvrisk %&gt;%
  ggplot(aes(x = measure_id, y = data_value, color = measure_id)) + 
  geom_boxplot() +
  theme(axis.text.x = element_text(angle = 60, hjust = 1),
        legend.position = &quot;none&quot;) + 
   labs(
      title = &quot;Risk Factor Prevalence in NYC 2015-2016&quot;,
      x = &quot;Risk Factor&quot;,
      y = &quot;Prevalence (%)&quot;,
      caption = &quot;Data from the CDC&quot;
    ) + 
    viridis::scale_color_viridis(
      discrete = TRUE
    )</code></pre>
<p><img src="final_project_report_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
</div>
<div id="making-the-animated-scatterplot-for-coronary-artery-disease" class="section level3">
<h3>Making the animated scatterplot for coronary artery disease</h3>
<p>We first created another dataset that can be used for the animated scatterplot such that the outcome measure for coronary artery disease appears as a separate variable in the dataset. We created another similar dataset for stroke.</p>
<pre class="r"><code>nyc_cvrisk_limited = nyc_cvrisk %&gt;% 
  filter(short_question_text %in% c(&quot;Annual Checkup&quot;, &quot;Binge Drinking&quot;, &quot;Cholesterol Screening&quot;,
                                    &quot;Chronic Kidney Disease&quot;, &quot;Current Smoking&quot;, &quot;Diabetes&quot;, 
                                    &quot;Health Insurance&quot;, &quot;High Blood Pressure&quot;, &quot;High Cholesterol&quot;,
                                    &quot;Mental Health&quot;, &quot;Obesity&quot;, &quot;Physical Health&quot;, 
                                    &quot;Physical Inactivity&quot;, &quot;Sleep &lt;7 hours&quot;, 
                                    &quot;Taking BP Medication&quot;)) %&gt;% 
  droplevels() %&gt;% 
  mutate(risk_factor = short_question_text) %&gt;% 
  select(-short_question_text, -measure_id)

nyc_cad = nyc_cvrisk %&gt;% 
  filter(short_question_text == &quot;Coronary Heart Disease&quot;) %&gt;%
  droplevels() %&gt;% 
  select(-measure_id, -short_question_text, -population_count)

nyc_stroke = nyc_cvrisk %&gt;% 
  filter(short_question_text == &quot;Stroke&quot;) %&gt;%
  droplevels() %&gt;% 
  select(-measure_id, -short_question_text, -population_count)

nyc_cvrisk_joined = left_join(nyc_cvrisk_limited, nyc_cad, by = &quot;unique_id&quot;)
nyc_cvrisk_joined_stroke = left_join(nyc_cvrisk_limited, nyc_stroke, by = &quot;unique_id&quot;)</code></pre>
<p>We then created an animated scatterplot using <code>gganimate</code> with Coronary Heart Disease prevalence on the X-axis and different risk factors on the Y-axis</p>
<pre class="r"><code>theme_set(theme_bw())  # pre-set the bw theme.

## using transition_length and state_length
library(ggplot2)
library(gganimate)
p = nyc_cvrisk_joined %&gt;%  
  ggplot(aes(x = data_value.y, y = data_value.x, frame = risk_factor)) +
  geom_point(aes(size = population_count, colour = risk_factor ),
             alpha = 0.5) + 
  xlim(0, 10) +
  
  labs(title = &quot;{closest_state}&quot;,
       x = &#39;Coronary Heart Disease Prevalence (%)&#39;, 
       y = &#39;Risk Factor Prevalence (%)&#39;,
       colour = &#39;Risk Factors&#39;,
       size = &#39;Population Count&#39;) +
  
  theme(plot.title = element_text(size = 40, face = &quot;bold&quot;),
        axis.text=element_text(size=18),
        axis.title=element_text(size=18,face=&quot;bold&quot;)) + 
  theme(legend.text=element_text(size=16), legend.title=element_text(size=18,face=&quot;bold&quot;) ) +
  
  # gganimate parts
  transition_states(risk_factor, transition_length = 1, state_length = 3, wrap = TRUE) +
  enter_fade() +
  exit_fade()

animate(p, fps = 2, height = 600, width = 1000)</code></pre>
<p><img src="final_project_report_files/figure-html/unnamed-chunk-5-1.gif" /><!-- --></p>
</div>
<div id="making-the-animated-scatterplot-for-stroke" class="section level3">
<h3>Making the animated scatterplot for stroke</h3>
<p>We created a similar animation for stroke, the code for which is shown here.</p>
<pre class="r"><code>theme_set(theme_bw())  # pre-set the bw theme.
pp = nyc_cvrisk_joined_stroke %&gt;%  
  ggplot(aes(x = data_value.y, y = data_value.x, frame = risk_factor)) +
  geom_point(aes(size = population_count, colour = risk_factor ),
             alpha = 0.5) + 
  xlim(0, 10) +
  
  labs(title = &quot;{closest_state}&quot;,
       x = &#39;Stroke Prevalence (%)&#39;, 
       y = &#39;Risk Factor Prevalence (%)&#39;,
       colour = &#39;Risk Factors&#39;,
       size = &#39;Population Count&#39;) +
  
  theme(plot.title = element_text(size = 40, face = &quot;bold&quot;),
        axis.text=element_text(size=18),
        axis.title=element_text(size=18,face=&quot;bold&quot;)) + 
  theme(legend.text=element_text(size=16), legend.title=element_text(size=18,face=&quot;bold&quot;) ) +
  
  # gganimate parts
  transition_states(risk_factor, transition_length = 1, state_length = 3, wrap = TRUE) +
  enter_fade() +
  exit_fade()

animate(pp, fps = 2, height = 600, width = 1000)</code></pre>
<p><img src="final_project_report_files/figure-html/unnamed-chunk-6-1.gif" /><!-- --></p>
</div>
<div id="making-the-correlation-plot-for-coronary-artery-disease" class="section level3">
<h3>Making the correlation plot for coronary artery disease</h3>
<p>To make the correlation plot, we first transformed our dataset in the wide format and called it <code>nyc_cvrisk_wide</code>.</p>
<pre class="r"><code>nyc_cvrisk_wide = 
  nyc_cvrisk %&gt;% 
  select(-measure_id)%&gt;%
  spread(key = short_question_text, value = data_value) %&gt;% 
  janitor::clean_names()</code></pre>
<p>The correlation plot for coronary heart disease and risk factors of interest is as follows:</p>
<pre class="r"><code>nyc_cvrisk_wide %&gt;% 
  select(annual_checkup:sleep_7_hours) %&gt;% 
  select(&quot;coronary_heart_disease&quot;, everything())%&gt;%
  rename(&quot;Coronary Disease&quot; = coronary_heart_disease,
         &quot;Annual Checkup&quot; = annual_checkup,
         &quot;Binge Drinking&quot; = binge_drinking,
         &quot;Kidney Disease&quot; = chronic_kidney_disease,
         &quot;High Cholesterol&quot; = high_cholesterol,
         &quot;Hypertension&quot; = high_blood_pressure,
         &quot;Cholesterol Screening&quot; = cholesterol_screening,
         &quot;Current Smoking&quot; = current_smoking,
         &quot;Diabetes&quot; = diabetes,
         &quot;No Insurance&quot; = health_insurance,
         &quot;Poor Mental Health&quot; = mental_health,
         &quot;Obesity&quot; = obesity,
         &quot;Poor Health&quot; = physical_health,
         &quot;Physical Inactivity&quot; = physical_inactivity,
         &quot;Poor Sleep&quot; = sleep_7_hours)%&gt;%
  cor() %&gt;% 
  corrplot(method = &quot;square&quot;, addCoef.col = &quot;black&quot;, tl.col=&quot;black&quot;, tl.srt=45, insig = &quot;blank&quot;, 
         # hide correlation coefficient on the principal diagonal
         diag=FALSE, number.cex = .7)</code></pre>
<p><img src="final_project_report_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
</div>
<div id="making-the-correlation-plot-for-stroke" class="section level3">
<h3>Making the correlation plot for stroke</h3>
<p>The correlation plot for stroke and risk factors of interest is as follows:</p>
<pre class="r"><code>nyc_cvrisk_wide %&gt;% 
  select(annual_checkup:stroke)%&gt;%
  select(stroke, everything()) %&gt;% 
  select(-c(coronary_heart_disease))%&gt;%
  rename(&quot;Stroke&quot; = stroke,
         &quot;Annual Checkup&quot; = annual_checkup,
         &quot;Binge Drinking&quot; = binge_drinking,
         &quot;Kidney Disease&quot; = chronic_kidney_disease,
         &quot;High Cholesterol&quot; = high_cholesterol,
         &quot;Hypertension&quot; = high_blood_pressure,
         &quot;Cholesterol Screening&quot; = cholesterol_screening,
         &quot;Current Smoking&quot; = current_smoking,
         &quot;Diabetes&quot; = diabetes,
         &quot;No Insurance&quot; = health_insurance,
         &quot;Poor Mental Health&quot; = mental_health,
         &quot;Obesity&quot; = obesity,
         &quot;Poor Physical Health&quot; = physical_health,
         &quot;Physical Inactivity&quot; = physical_inactivity,
         &quot;Poor Sleep&quot; = sleep_7_hours)%&gt;%
  cor() %&gt;% 
  corrplot(method = &quot;square&quot;, addCoef.col = &quot;black&quot;, tl.col=&quot;black&quot;, tl.srt=45, insig = &quot;blank&quot;, 
         # hide correlation coefficient on the principal diagonal
         diag=FALSE, number.cex = .7)</code></pre>
<p><img src="final_project_report_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
</div>
</div>
<div id="findings" class="section level1">
<h1>Findings</h1>
<p>We made several salient observations about correlation of risk factors with <em>Coronary Artery Disease</em> and <em>Stroke</em>.</p>
<p>All of the risk factors (with the exception of binge drinking and cholesterol screening) have a positive association with both coronary heart disease and stroke. The top three risk factors for both outcomes are chronic kidney disease, diabetes and poor physical Health. In addition, many of the risk factors are associated with each other; namely, physical inactivity is heavily correlated with many of the other variables. The risk factors tend to be similarly associated with both coronary heart disease and stroke, with stronger associations with stroke.</p>
<div id="factors-correlated-with-coronary-artery-disease" class="section level3">
<h3>Factors correlated with coronary artery disease</h3>
<p>We observed that the following factors were strongly positively correlated with coronary artery disease:</p>
<ul>
<li>High Blood Pressure - r = 0.7</li>
<li>High Cholesterol - r = 0.9</li>
<li>Chronic Kidney Disease - r = 0.85</li>
<li>Diabetes - r = 0.71</li>
<li>Poor Physical Health - r = 0.7</li>
<li>Physical Inactivity - r = 0.6</li>
<li>Poor Mental Health - r = 0.4</li>
<li>Current Smoking - r = 0.4</li>
</ul>
<p>We observed that the following factors were strongly negatively correlated with coronary artery disease:</p>
<ul>
<li>Binge Alcohol Drinking - r = -0.6</li>
</ul>
</div>
<div id="factors-correlated-with-stroke" class="section level3">
<h3>Factors correlated with stroke</h3>
<p>We observed that the following factors were strongly positively correlated with coronary artery disease:</p>
<ul>
<li>High Blood Pressure - r = 0.9</li>
<li>High Cholesterol - r = 0.7</li>
<li>Chronic Kidney Disease - r = 0.97</li>
<li>Diabetes - r = 0.9</li>
<li>Poor Physical Health - r = 0.8</li>
<li>Physical Inactivity - r = 0.7</li>
<li>Poor Mental Health - r = 0.7</li>
<li>Current Smoking - r = 0.7</li>
<li>Obesity - r = 0.7</li>
<li>Poor Sleep - r = 0.6</li>
<li>Lack of Health Insurance - r = 0.5</li>
</ul>
<p>We observed that the following factors were strongly negatively correlated with coronary artery disease:</p>
<ul>
<li>Binge Alcohol Drinking - r = -0.7</li>
<li>Cholesterol Screening - r = -0.25</li>
</ul>
</div>
</div>
<div id="additional-analysis" class="section level1">
<h1>Additional Analysis</h1>
<div id="geocoding" class="section level3">
<h3>Geocoding</h3>
<p>We used the <code>shinyApp</code> and <code>leaflet</code> package to perform visualization of geographic distribution of several risk factors and outcomes in New York City. We observed that most of the risk factors were observed with higher frequency in the Harlem and Bronx area. Unhealthy behaviors like binge alcohol drinking, however, were more prevalent in downtown Manhattan.</p>
</div>
<div id="risk-prediction" class="section level3">
<h3>Risk Prediction</h3>
<p>We also used <code>shinyApp</code> and <code>plotly</code> package to build a program to calculate individual risk of heart disease using the Framingham Risk Score. This app allows for input of risk factor variables of an indivdual and predicts the 10-year cardiovascular risk using the Framingham risk score algorithm.</p>
</div>
</div>
<div id="discussion" class="section level1">
<h1>Discussion</h1>
<p>In the process of building this project, we gained several insights about risk factors for heart disease.</p>
<ul>
<li><p>In particular, the strength of correlation of lifestyle risk factors like physical inactivity and smoking with coronary artery disease and stroke indicate the potential for making an impact by targeting these interventions. Moreover, modifiable risk factors like high blood pressure and high cholesterol are strongly associated with heart disease and stroke and cholesterol screening is inversely associated, suggesting the need to spread awareness about these risk factors so that they can be diagnosed and treated early. Interestingly, alcohol intake was negatively correlated with both coronary disease and stroke. This has been observed in several meta-analyses as well. This is however, likely only an association, and not evidence of causation, as discussed in <a href="http://www.onlinejacc.org/content/accj/69/1/25.full.pdf">this article</a>.</p></li>
<li><p>Visualization of geographic variation of these risk factors in outcomes in New York City provide insights into target neighborhoods for implementation of cardiovascular risk reduction policies.</p></li>
<li><p>Visualization of individual risk for heart disease using patient-level inputs, and the ability to understand how modification of one input can impact the risk can be very powerful for people working toward decreasing their risk.</p></li>
</ul>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
